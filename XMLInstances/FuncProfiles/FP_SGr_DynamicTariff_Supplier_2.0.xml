<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<FunctionalProfileFrame xmlns="http://www.smartgridready.com/ns/V0/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/SGrIncluder.xsd">
  <releaseNotes>
    <state>Draft</state>
    <changeLog>
      <version>1.0.0</version>
      <date>2025-04-14</date>
      <author>SGr/mkr</author>
      <comment>Publication</comment>
    </changeLog>
    <changeLog>
      <version>2.0.0</version>
      <date>2025-11-19</date>
      <author>SGr/mkr</author>
      <comment>New draft based on VSE</comment>
    </changeLog>
  </releaseNotes>
  <functionalProfile>
    <functionalProfileIdentification>
      <specificationOwnerIdentification>0</specificationOwnerIdentification>
      <functionalProfileCategory>DynamicTariff</functionalProfileCategory>
      <functionalProfileType>Supplier</functionalProfileType>
      <levelOfOperation>5</levelOfOperation>
      <versionNumber>
        <primaryVersionNumber>2</primaryVersionNumber>
        <secondaryVersionNumber>0</secondaryVersionNumber>
        <subReleaseVersionNumber>0</subReleaseVersionNumber>
      </versionNumber>
    </functionalProfileIdentification>
    <legibleDescription>
      <textElement>
        <![CDATA[
          The dynamic tariff structure offers a price that can change every 15 minutes.
          <p>The functional profile contains all the necessary information to retrieve a series of data points with information on tariff values every 15 minutes.</p>
          <p>The prices are available on an online interface (WEB-API), which an energy management system will use to plan the operation of various devices.</p>
          <p><img src="ressources/dynamic_tariff.svg"/></p>
          <p>This functional profile can only be provided by products with REST API interface.</p>
          <p>The request for the tariffs defines the start time stamp and end time stamp of the interval the tariffs should be returned for.
          Each entry in the resulting tariff list contains also the start time stamp and end time stamp of the sub intervals together with a list of entries with tariff unit and tariff value.</p>

          <p>This functional profile is based on the VSE specification <a href="https://www.strom.ch/de/shop/dynamische-netznutzungstarife-im-verteilnetz-hdn-ch-2025">Dynamic grid usage tariffs in the distribution grid</a>.</p>

          The schema for the JSON created by the REST API is

<font size="1"><pre style="color:blue">
{
  "$schema": "http://json-schema.org/draft-07/schema",
  "title": "Dynamic Tariffs",
  "description": "JSON schema for the delivery of dynamic tariff price values",
  "type": "object",
  "properties": {
    "publication_timestamp": {
      "description": "Time of tariff publication",
      "type": "string",
      "oneOf": [
        { "format": "date-time" },
        { "format": "empty" }
      ]
    },
    "prices": {
      "description": "Price values",
      "type": "array",
      "items": { "$ref": "#/$defs/price_item" }
    }
  },
  "additionalProperties": true,
  "required": [
    "publication_timestamp",
    "prices"
  ],
  "$defs": {
    "price_item": {
      "type": "object",
      "properties": {
        "start_timestamp": {
          "description": "Start time stamp of the tariff interval",
          "type": "string",
          "format": "date-time"
        },
        "end_timestamp": {
          "description": "End time stamp of the tariff interval",
          "type": "string",
          "format": "date-time"
        },
        "electricity": {
          "description": "Electricity price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "feed_in": {
          "description": "Feed-in price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "grid": {
          "description": "Grid price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "integrated": {
          "description": "Integrated price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "regional_fees": {
          "description": "Regional fee price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        }
      },
      "additionalProperties": true,
      "required": [
        "start_timestamp",
        "end_timestamp"
      ]
    },
    "price_component_item": {
      "type": "object",
      "properties": {
        "unit": {
          "description": "The tariff unit of the price value",
          "type": "string"
        },
        "value": {
          "description": "The tariff price value",
          "type": "number"
        }
      },
      "additionalProperties": true,
      "required": [
        "unit",
        "value"
      ]
    }
  }
}
</pre></font>

          An example JSON is:

<font size="1"><pre style="color:blue">
{
  "publication_timestamp": "2025-01-01T00:00:00+01:00",
  "prices": [
    {
      "start_timestamp": "2025-01-01T00:00:00+01:00",
      "end_timestamp": "2025-01-01T00:15:00+01:00",
      "integrated": [
        {
          "unit": "CHF_kWh",
          "value": 0.4925
        }
      ]
    },
    {
      "start_timestamp": "2025-01-01T00:15:00+01:00",
      "end_timestamp": "2025-01-01T00:30:00+01:00",
      "integrated": [
        {
          "unit": "CHF_kWh",
          "value": 0.491133
        }
      ]
    },
    {
      "start_timestamp": "2025-01-01T00:30:00+01:00",
      "end_timestamp": "2025-01-01T00:45:00+01:00",
      "integrated": [
        {
          "unit": "CHF_kWh",
          "value": 0.486722
        }
      ]
    }
  ]
}
</pre></font>
        ]]>
      </textElement>
      <language>en</language>
    </legibleDescription>
    <legibleDescription>
      <textElement>
        <![CDATA[
          Die dynamische Tarif-Struktur bietet einen Strompreis, der sich alle 15 Minuten ändern kann.</p>
          <p>Das Funktionsprofil enthält alle nötigen Informationen, um eine Reihe von Datenpunkten mit Tarifinformationen alle 15 Minuten abzufragen.</p>
          <p>Die Preise sind über ein Online-Interface (WEB-API) abrufbar, womit ein Energie-Management-System den Betrieb verschiedener Geräte zeitlich festlegt.</p>
          <p><img src="ressources/dynamic_tariff.svg"/></p>
          <p>Dieses Funktionsprofil kann nur mit Produkten genutzt werden, die ein REST API unterstützen.</p>
          <p>Die Tarif-Abfrage definiert den Start- und End-Zeitpunkt des Intervalls, für das die Tarife abgerufen werden.
              Jedes Element der resultierenden Tarif-Liste enthält auch den Start- und End-Zeitpunkt der Sub-Intervalle, in Kombination mit einer Liste von Elementen mit Tarif-Einheit und -Preis.</p>

          <p>Dieses Funktionsprofil basiert auf der VSE-Spezifikation <a href="https://www.strom.ch/de/shop/dynamische-netznutzungstarife-im-verteilnetz-hdn-ch-2025">Dynamische Netznutzungstarife im Verteilnetz</a>.</p>

          Das JSON-Schema des REST API ist

<font size="1"><pre style="color:blue">
{
  "$schema": "http://json-schema.org/draft-07/schema",
  "title": "Dynamic Tariffs",
  "description": "JSON schema for the delivery of dynamic tariff price values",
  "type": "object",
  "properties": {
    "publication_timestamp": {
      "description": "Time of tariff publication",
      "type": "string",
      "oneOf": [
        { "format": "date-time" },
        { "format": "empty" }
      ]
    },
    "prices": {
      "description": "Price values",
      "type": "array",
      "items": { "$ref": "#/$defs/price_item" }
    }
  },
  "additionalProperties": true,
  "required": [
    "publication_timestamp",
    "prices"
  ],
  "$defs": {
    "price_item": {
      "type": "object",
      "properties": {
        "start_timestamp": {
          "description": "Start time stamp of the tariff interval",
          "type": "string",
          "format": "date-time"
        },
        "end_timestamp": {
          "description": "End time stamp of the tariff interval",
          "type": "string",
          "format": "date-time"
        },
        "electricity": {
          "description": "Electricity price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "feed_in": {
          "description": "Feed-in price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "grid": {
          "description": "Grid price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "integrated": {
          "description": "Integrated price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        },
        "regional_fees": {
          "description": "Regional fee price values in the interval",
          "type": "array",
          "items": { "$ref": "#/$defs/price_component_item" }
        }
      },
      "additionalProperties": true,
      "required": [
        "start_timestamp",
        "end_timestamp"
      ]
    },
    "price_component_item": {
      "type": "object",
      "properties": {
        "unit": {
          "description": "The tariff unit of the price value",
          "type": "string"
        },
        "value": {
          "description": "The tariff price value",
          "type": "number"
        }
      },
      "additionalProperties": true,
      "required": [
        "unit",
        "value"
      ]
    }
  }
}
</pre></font>

          Ein JSON-Beispiel ist:

<font size="1"><pre style="color:blue">
{
  "publication_timestamp": "2025-01-01T00:00:00+01:00",
  "prices": [
    {
      "start_timestamp": "2025-01-01T00:00:00+01:00",
      "end_timestamp": "2025-01-01T00:15:00+01:00",
      "integrated": [
        {
          "unit": "CHF_kWh",
          "value": 0.4925
        }
      ]
    },
    {
      "start_timestamp": "2025-01-01T00:15:00+01:00",
      "end_timestamp": "2025-01-01T00:30:00+01:00",
      "integrated": [
        {
          "unit": "CHF_kWh",
          "value": 0.491133
        }
      ]
    },
    {
      "start_timestamp": "2025-01-01T00:30:00+01:00",
      "end_timestamp": "2025-01-01T00:45:00+01:00",
      "integrated": [
        {
          "unit": "CHF_kWh",
          "value": 0.486722
        }
      ]
    }
  ]
}
</pre></font>
        ]]>
      </textElement>
      <language>de</language>
    </legibleDescription>
  </functionalProfile>
  <dataPointList>
    <dataPointListElement>
      <dataPoint>
        <dataPointName>TariffSupply</dataPointName>
        <dataDirection>R</dataDirection>
        <presenceLevel>M</presenceLevel>
        <dataType>
          <json />
        </dataType>
        <unit>NONE</unit>
        <parameterList>
          <parameterListElement>
            <name>start_timestamp</name>
            <dataType>
              <string />
            </dataType>
            <parameterDescription>
              <textElement>
                Begin of tariff period to be queried. Format according ISO 8601: YYYY-MM-DDThh:mm:ssTZD.
              </textElement>
              <language>en</language>
              <label>Period start time stamp</label>
            </parameterDescription>
            <parameterDescription>
              <textElement>
                Beginn der abzurufenden Tarifperiode. Format gem. ISO 8601: YYYY-MM-DDThh:mm:ssTZD.
              </textElement>
              <language>de</language>
              <label>Start-Zeitpunkt Periode</label>
            </parameterDescription>
          </parameterListElement>
          <parameterListElement>
            <name>end_timestamp</name>
            <dataType>
              <string />
            </dataType>
            <parameterDescription>
              <textElement>
                End of tariff period to be queried. Format according ISO 8601: YYYY-MM-DDThh:mm:ssTZD.
              </textElement>
              <language>en</language>
              <label>Period end time stamp</label>
            </parameterDescription>
            <parameterDescription>
              <textElement>
                Ende der abzurufenden Tarifperiode. Format gem. ISO 8601: YYYY-MM-DDThh:mm:ssTZD.
              </textElement>
              <language>de</language>
              <label>End-Zeitpunkt Periode</label>
            </parameterDescription>
          </parameterListElement>
        </parameterList>
        <legibleDescription>
          <textElement>
            <![CDATA[
              <p>Tariff list - description see above</p>
            ]]>
          </textElement>
          <language>en</language>
        </legibleDescription>
        <legibleDescription>
          <textElement>
            <![CDATA[
              <p>Tarif-Liste - Beschreibung siehe oben</p>
            ]]>
          </textElement>
          <language>de</language>
        </legibleDescription>
      </dataPoint>
    </dataPointListElement>
  </dataPointList>
</FunctionalProfileFrame>