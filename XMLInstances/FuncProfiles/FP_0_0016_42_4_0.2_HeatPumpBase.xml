<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<sgr:SGrFunctionalProfileFrame xmlns:sgr="http://www.smartgridready.com/ns/V0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/SGrIncluder.xsd">
    <sgr:releaseNotes>
        <sgr:state>Review</sgr:state>
        <sgr:remarks>This functional profile is in preliminary state. Before implementing external-interfaces or any other
            functionality, the detailed functionality must be verified with the battery manufacturer.
        </sgr:remarks>
        <sgr:changelog>
            <sgr:version>0.1.1</sgr:version>
            <sgr:date>2023-01-25</sgr:date>
            <sgr:author>IBT/cb</sgr:author>
            <sgr:comment>Vorbereitung Soft Start</sgr:comment>
        </sgr:changelog>
        <sgr:changelog>
            <sgr:version>0.2.2</sgr:version>
            <sgr:date>2022-10-31</sgr:date>
            <sgr:author>Ergo/sz</sgr:author>
            <sgr:comment>Finalisierung Go-Live</sgr:comment>
        </sgr:changelog>
    </sgr:releaseNotes>
		<sgr:functionalProfile profileName="HeatPumpBase">
			<sgr:profileNumber>
				<sgr:specsOwnerId>0</sgr:specsOwnerId>
				<sgr:profileIdentification>HeatPumpControl</sgr:profileIdentification>
				<sgr:subProfileIdent>HeatPumpBase</sgr:subProfileIdent>
				<sgr:sgrLevelOfOperation>m</sgr:sgrLevelOfOperation>
				<sgr:versionNumber>
					<sgr:primaryVersionNumber>0</sgr:primaryVersionNumber>
					<sgr:secondaryVersionNumber>2</sgr:secondaryVersionNumber>
					<sgr:subReleaseVersionNumber>2</sgr:subReleaseVersionNumber>
				</sgr:versionNumber>
			</sgr:profileNumber>
			<sgr:fpNameList>
				<sgr:sLV1Name>HeatPumpBase</sgr:sLV1Name>
			</sgr:fpNameList>
			<sgr:fpLegibDesc>
				<sgr:textElement>Das Profil definiert den Grundbaustein zur dynamischen Ansteuerung von Wärmepumpen über eine Betriebsmodus gestützt Beeinflussung der Sollwerte nach SGr Stufe 2. Der Betrieb der Wärmepumpe muss in sich sicher sein, unabhängig von den äusseren Vorgaben. Dieses Grundprofil definiert die Datenpunkte, welche zur Steuerung des Gerätes «Wärmepumpe» auf Level 4 grundsätzlich zur Verfügung gestellt werden und stellen die Version einer typischen EInfamilienhauswärmepumpe miz Aussentemperaturfühler dar. Für die einzelnen Heizkreise, Warmwasser, Pufferspeicher und das Energie-Monitoring  sowie eine Verdichterdrehzahl / Leistungsregelung werden separate Profile zur Verfügung gestellt.</sgr:textElement>
				<sgr:language>de</sgr:language>
			</sgr:fpLegibDesc>
		</sgr:functionalProfile>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="HPOpModeCmd" mroVisibilityIndicator="R" rwpDatadirection="RW" unit="NONE">
				<sgr:basicDataType>
					<sgr:enum>
						<sgr:sgrHPOpMode>WP_EMERG_OP</sgr:sgrHPOpMode>					
					</sgr:enum>
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>HPOpModeCmd</sgr:sLV1Name>
					<sgr:sHPbwpName>Betriebsmodus</sgr:sHPbwpName>      
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement> 
					<![CDATA[
					<p>Grund-Betriebsart der Wärmepumpe</pl>
					<ol>
   					<li><strong>WP_EMERG_OP:</strong> Notbetrieb</li>
   					<li><strong>WP_READY:</strong> Bereitschaft</li>
   					<li><strong>WP_PROG_OP:</strong> Programmbetrieb</li>
   					<li><strong>WP_COMFORT:</strong> Komfortbetrieb</li>
   					<li><strong>WP_ECO_OP:</strong> Sparbetrieb</li>
   					<li><strong>WP_DOM_WATER_OP:</strong> Warmwassererzeugung</li>  
   					<li><strong>WP_COOL_ACTIVE_OP:</strong> Kuehlen aktiv</li>  
   					<li><strong>WP_COOL_PASSIVE_OP:</strong> Kuehlen passic</li>   
					</ol>
					]]>					
					</sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
				<sgr:dpPrgDesc>
					<sgr:textElement>some of the devices do either not allow setting OpMode setting(the name should the ne named "HPOpModeCmdFB") or allow it in a special mode only.</sgr:textElement>
					<sgr:language>en</sgr:language>
				</sgr:dpPrgDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="HPOpState" mroVisibilityIndicator="M" rwpDatadirection="R" unit="NONE">
				<sgr:basicDataType>
					<sgr:enum2bitmapIndex>
						<sgr:sgrHPOpstate>HP_PUMP_ON</sgr:sgrHPOpstate>
					</sgr:enum2bitmapIndex>					
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>HPOpState</sgr:sLV1Name>
					<sgr:sHPbwpName>Aktive Funktion</sgr:sHPbwpName>
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>            
				<![CDATA[	
					<p>Auslesen des aktuellen Status der Wärmepumpe</p>
					<ol>
   					<li><strong>HP_PUMP_ON:</strong> Waermepumpe EIN</li>
   					<li><strong>HP_IN_HEATING_MODE:</strong> Waermepumpe heizt</li>
   					<li><strong>HP_IN_DHW_MODE:</strong> Waermepumpe im Warmwassermode</li>
   					<li><strong>COMPRESSOR_RUNNING:</strong> Kompressor laeuft</li>
   					<li><strong>SUMMER_MODE_ACTIVE:</strong> Waermepumpe im Sommermodus</li>
   					<li><strong>COOLING_MODE_ACTIVE:</strong> Waermepumpe kuehlt</li>
   					<li><strong>IN_DEFROST_MODE:</strong> Waermepumpe im Gefrierschutzmode</li>
					</ol>
				]]></sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="ErrorNrSGr" mroVisibilityIndicator="M" rwpDatadirection="R" unit="NONE">
				<sgr:basicDataType>
					<sgr:boolean>false</sgr:boolean>					
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>ErrorNrSGr</sgr:sLV1Name>
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>0 means no errors. </sgr:textElement>
					<sgr:language>en</sgr:language>
				</sgr:dpLegibDesc>
				<sgr:dpPrgDesc>
					<sgr:textElement>Check the manufaturer error list for its proprietary error analytics. This datapoint can be replaced by UINT_16 in this case. FALSE = 0 MUST be fullfilled in any case.</sgr:textElement>
					<sgr:language>en</sgr:language>
				</sgr:dpPrgDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="OutsideAirTemp" mroVisibilityIndicator="O" rwpDatadirection="R" unit="DEGREES_CELSIUS">
				<sgr:basicDataType>
					<sgr:float32>0</sgr:float32>
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>OutsideAirTemp</sgr:sLV1Name>
					<sgr:sHPbwpName>Temperatur Außen</sgr:sHPbwpName>
					<sgr:sEN17609Name>Outside Air Temperatur</sgr:sEN17609Name>
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>
						Aktuelle Aussentemperatur (gemessen über Aussenfühler)
					</sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="SupplyWaterTemp" mroVisibilityIndicator="M" rwpDatadirection="R" unit="DEGREES_CELSIUS">
				<sgr:basicDataType>
					<sgr:float32>0.0</sgr:float32>
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>SupplyWaterTemp</sgr:sLV1Name>
					<sgr:sHPbwpName>Temperatur Vorlauf</sgr:sHPbwpName>
					<sgr:sEN17609Name>Supply WaterTemperat</sgr:sEN17609Name></sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>Auslesen der aktuellen Ist-Temperatur des Vorlaufs des Heizkreises.</sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="BackSupplyWaterTemp" mroVisibilityIndicator="O" rwpDatadirection="R" unit="DEGREES_CELSIUS">
				<sgr:basicDataType>
					<sgr:float32>0.0</sgr:float32>
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>BackSupplyWaterTemp</sgr:sLV1Name>
					<sgr:sHPbwpName>Temperatur Rücklauf</sgr:sHPbwpName>
					<sgr:sEN17609Name>Return Water Temperature</sgr:sEN17609Name>
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>Auslesen der aktuellen aktuellen-Temperatur des Rücklaufs.</sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="SupplyWaterTempStpt"
				mroVisibilityIndicator="R" unit="DEGREES_CELSIUS"
				rwpDatadirection="RW">
				<sgr:basicDataType>
					<sgr:float32>0.0</sgr:float32>
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>SupplyWaterTempStpt</sgr:sLV1Name>
					<sgr:sHPbwpName>
						Solltemperatur für Anforderungsfühler
					</sgr:sHPbwpName>
					<sgr:sEN17609Name>
						Supply Water Temperature Setpoint
					</sgr:sEN17609Name>
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>Setzen oder nur Auslesen der aktuellen Soll-Temperatur des Vorlaufs des Heizkreises.</sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
				<sgr:dpPrgDesc>
					<sgr:textElement>
						some of the devices do either not allow setting
						Setpoints (the name should the ne named
						"SupplyWaterTempStptFb") or allow it in a
						special mode only.
					</sgr:textElement>
					<sgr:language>en</sgr:language>
				</sgr:dpPrgDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="SupplyWaterTempStptFb"
				mroVisibilityIndicator="O" unit="DEGREES_CELSIUS"
				rwpDatadirection="R">
				<sgr:basicDataType>
					<sgr:float32>0.0</sgr:float32>
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>SupplyWaterTempStpt</sgr:sLV1Name>
					<sgr:sHPbwpName>
						Solltemperatur für Anforderungsfühler
					</sgr:sHPbwpName>
					<sgr:sEN17609Name>
						Supply Water Temperature Setpoint
					</sgr:sEN17609Name>
				</sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>Auslesen der aktuellen Soll-Temperatur des Vorlaufs des Heizkreises.</sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
				<sgr:dpPrgDesc>
					<sgr:textElement>
						some of the devices not allow setting
						Setpoints.
					</sgr:textElement>
					<sgr:language>en</sgr:language>
				</sgr:dpPrgDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint datapointName="SourceTemp"
				mroVisibilityIndicator="O" rwpDatadirection="R"
				unit="DEGREES_CELSIUS">
				<sgr:basicDataType>
					<sgr:float32>0.0</sgr:float32>					
				</sgr:basicDataType>
				<sgr:dpNameList>
					<sgr:sLV1Name>SourceTemp</sgr:sLV1Name>
					<sgr:sHPbwpName>Temperatur Wärmequelleneintritt</sgr:sHPbwpName></sgr:dpNameList>
				<sgr:dpLegibDesc>
					<sgr:textElement>Die Temperatur am Wärmequelleneintritt (Umgebungsluft, Wasser oder Erdsonde) erlaubt eine genauere Analyse der Energieprognose,  </sgr:textElement>
					<sgr:language>de</sgr:language>
				</sgr:dpLegibDesc>
			</sgr:dataPoint>
		</sgr:dpListElement>		
	</sgr:SGrFunctionalProfileFrame>
