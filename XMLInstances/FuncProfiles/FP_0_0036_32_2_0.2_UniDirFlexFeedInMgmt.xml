<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<FunctionalProfileFrame xmlns="http://www.smartgridready.com/ns/V0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/SGrIncluder.xsd">
  <releaseNotes>
    <state>Review</state>
    <changelog>
      <version>0.1.1</version>
      <date>2021-09-02</date>
      <author>IBT/cb</author>
      <comment>Vorbereitung beta test</comment>
    </changelog>
    <changelog>
      <version>0.2.2</version>
      <date>2022-09-23</date>
      <author>Ergo/sz</author>
      <comment>Finalisierung Go-Live</comment>
    </changelog>
  </releaseNotes>
  <functionalProfile>
    <functionalProfileIdentification>
      <specificationOwnerIdentification>0</specificationOwnerIdentification>
      <functionalProfileCategory>SGCP</functionalProfileCategory>
      <functionalProfileType>UniDirFlexFeedInMgmt</functionalProfileType>
      <levelOfOperation>2</levelOfOperation>
      <versionNumber>
        <primaryVersionNumber>0</primaryVersionNumber>
        <secondaryVersionNumber>2</secondaryVersionNumber>
        <subReleaseVersionNumber>2</subReleaseVersionNumber>
      </versionNumber>
    </functionalProfileIdentification>
    <legibleDescription>
      <textElement>
        <![CDATA[
          <img src="ressources/fp_cem_to_flexmgr.svg"/>
          Anlagen, welche dieses Funktionsprofil nutzen verfügen in der Regel über einen CEM (Customer Energy Manager). Diese Software stellt sicher, dass der Energiebezug der Geräte entsprechend den Betriebsmodi beim Moduswechsel neu aufeinander abgestimmt wird. Beim Wechsel reagiert eine Anlage gemäss den in SGr-Attribut b) vereinbarten Parametern.
          <ol>
            <li>Betriebszustand 3 (Schaltzustand, bei Klemmenlösung: 0:0): <strong>Normal</strong>: Im Normalbetrieb folgt die Rückspeisung entsprechend
                der Anlagemöglichkeiten innerhalb des zugelassenen Leistungsbereichs.</li>
            <li>Betriebszustand 2 (Schaltzustand, bei Klemmenlösung: 0:1): <strong>Reduziert (Wunsch)</strong>: Die Rückspeisung soll um einen vereinbarten
                Betrag (in Prozent, siehe SGrAttribut a) gesenkt werden, falls dies möglich ist.</li>
            <li>Betriebszustand 1 (Schaltzustand, bei Klemmenlösung: 1:0): <strong>Gesperrt</strong>: In diesen Betriebsmode darf keine Energie ins Netz
                eingespeist werden. Dies kann mittels Lasterhöhung, Batterieladung oder Sperrbetrieb der Stromquelle sichergestellt werden.</li>
            <li>Betriebszustand 4 (Schaltzustand, bei Klemmenlösung: 1:1): <strong>Maximal</strong>: Die Anlage ermöglicht die maximale Rückspeisung
                unter Einsatz aller Stromquellen.</li>
          </ol>
          
          <p>Hinweis</p>
          <ul>
            <li>Geräte mit 2 Klemmenkontakte setzen die Klemmen-Datenpunkte  um.</li>
            <li>Geräte mit Modbus oder RestAPI setzen bevorzugt den Enum-basierten Datenpunkt um.</li>
          </ul>
        ]]>
      </textElement>
      <language>de</language>
    </legibleDescription>
  </functionalProfile>
  <genericAttributes>
    <smoothTransition>
      <winTms>0</winTms>
      <rvrtTms>0</rvrtTms>
      <rmpTms>0</rmpTms>
    </smoothTransition>
    <curtailment>30</curtailment>
  </genericAttributes>
  <dataPointListElement>
    <dataPoint datapointName="SGCP_FeedInStateLv2" presenceLevel="O" dataDirection="R" unit="NONE">
      <dataType>
        <enum>
          <sgrSGCPFeedInStateLv2>FI_NORMAL</sgrSGCPFeedInStateLv2>
        </enum>
      </dataType>
      <legibleDescription>
        <textElement>FI_Normal, FI_Reduced, FI_Locked, FI_Max</textElement>
        <language>de</language>
      </legibleDescription>
    </dataPoint>
  </dataPointListElement>
  <dataPointListElement>
    <dataPoint datapointName="SGrFlexFeedIn1" presenceLevel="M" dataDirection="W" unit="NONE">
      <dataType>
        <boolean/>
      </dataType>
      <legibleDescription>
        <textElement>Schaltzustand erste Klemme (0 oder 1)</textElement>
        <language>de</language>
      </legibleDescription>
    </dataPoint>
  </dataPointListElement>
  <dataPointListElement>
    <dataPoint datapointName="SGrFlexFeedIn2" presenceLevel="M" dataDirection="W" unit="NONE">
      <dataType>
        <boolean/>
      </dataType>
      <legibleDescription>
        <textElement>Schaltzustand zweite Klemme (0 oder 1)</textElement>
        <language>de</language>
      </legibleDescription>
    </dataPoint>
  </dataPointListElement>
</FunctionalProfileFrame>