<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<DeviceFrame xmlns="http://www.smartgridready.com/ns/V0/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/Product/Product.xsd">
  <deviceName>Fronius Smart Meter IP ModbusTCP</deviceName>
  <manufacturerName>Fronius</manufacturerName>
  <specificationOwnerIdentification>0</specificationOwnerIdentification>
  <releaseNotes>
    <state>Draft</state>
    <changeLog>
      <version>0.1.0</version>
      <date>2025-12-04</date>
      <author>SGr/mkr</author>
      <comment>Draft for Testlab</comment>
    </changeLog>
  </releaseNotes>
  <deviceInformation>
    <legibleDescription>
      <textElement>
        <![CDATA[
          <p>The Fronius Smart Meter IP is a 3-phase energy meter
          Measurements are taken using current transformers.</p>
          <p>The Modbus register map is based on the SunSpec model 213.</p>
        ]]>
      </textElement>
      <language>en</language>
    </legibleDescription>
    <legibleDescription>
      <textElement>
        <![CDATA[
          <p>Das Fronius Smart Meter IP ist ein 3-Phasen-Stromzähler.
          Die Messung erfolgt mit Stromwandlern.</p>
          <p>Die Modbus Register-Map basiert auf dem SunSpec model 213.</p>
        ]]>
      </textElement>
      <language>de</language>
    </legibleDescription>
    <deviceCategory>SubMeterElectricity</deviceCategory>
    <isLocalControl>true</isLocalControl>
    <softwareRevision>3.0.1</softwareRevision>
    <hardwareRevision>1.0.0</hardwareRevision>
    <levelOfOperation>m</levelOfOperation>
    <versionNumber>
      <primaryVersionNumber>0</primaryVersionNumber>
      <secondaryVersionNumber>1</secondaryVersionNumber>
      <subReleaseVersionNumber>0</subReleaseVersionNumber>
    </versionNumber>
  </deviceInformation>
  <configurationList>
    <configurationListElement>
      <name>slave_id</name>
      <dataType>
        <int16 />
      </dataType>
      <defaultValue>1</defaultValue>
      <configurationDescription>
        <textElement>Modbus slave ID.</textElement>
        <language>en</language>
        <label>Modbus slave ID</label>
      </configurationDescription>
    </configurationListElement>
    <configurationListElement>
      <name>tcp_address</name>
      <dataType>
        <string />
      </dataType>
      <defaultValue>0.0.0.0</defaultValue>
      <configurationDescription>
        <textElement>The IP address</textElement>
        <language>en</language>
        <label>TCP/IP address</label>
      </configurationDescription>
    </configurationListElement>
    <configurationListElement>
      <name>tcp_port</name>
      <dataType>
        <int32 />
      </dataType>
      <defaultValue>502</defaultValue>
      <configurationDescription>
        <textElement>The IP port</textElement>
        <language>en</language>
        <label>TCP/IP port</label>
      </configurationDescription>
    </configurationListElement>
  </configurationList>
  <interfaceList>
    <modbusInterface>
      <modbusInterfaceDescription>
        <modbusInterfaceSelection>TCPIP</modbusInterfaceSelection>
        <modbusTcp>
          <port>{{tcp_port}}</port>
          <address>{{tcp_address}}</address>
          <slaveId>{{slave_id}}</slaveId>
        </modbusTcp>
        <firstRegisterAddressIsOne>true</firstRegisterAddressIsOne>
        <bitOrder>BigEndian</bitOrder>
      </modbusInterfaceDescription>
      <functionalProfileList>
        <functionalProfileListElement>
          <functionalProfile>
            <functionalProfileName>VoltageAC</functionalProfileName>
            <functionalProfileIdentification>
              <specificationOwnerIdentification>0</specificationOwnerIdentification>
              <functionalProfileCategory>Metering</functionalProfileCategory>
              <functionalProfileType>VoltageAC</functionalProfileType>
              <levelOfOperation>m</levelOfOperation>
              <versionNumber>
                <primaryVersionNumber>1</primaryVersionNumber>
                <secondaryVersionNumber>0</secondaryVersionNumber>
                <subReleaseVersionNumber>0</subReleaseVersionNumber>
              </versionNumber>
            </functionalProfileIdentification>
            <legibleDescription>
              <textElement>
                <![CDATA[
                  <img src="ressources/fp_product_to_ems.svg" style="float:left; padding:0.3em;"/>
                  <strong>Messung der Spannung</strong><br />
                  Monitoring Funktionsprofil für Stromerzeuger und Stromverbraucher zur Kontrolle der Systemlast und/oder für regeltechnische
                  Zwecke.

                  <p>Dieses Funktionsprofil erlaubt sowohl die Messung der Spannung auf einer Phase wie auch auf drei Phasen.
                    Eine der folgenden Varianten muss bei der Implementierung des Funktionsprofiles umgesetzt werden:
                  <ul>
                    <li>Einphasige Geräte geben die Spannung über die erste Phase an (VoltageACL1_N)</li>
                    <li>3-phasige Geräte in Sternschaltung geben die Spannung pro Phase gegen den Nullleiter an (VoltageACL1_N, VoltageACL2_N, VoltageACL2_N).</li>
                    <li>3-phasige Geräte in Dreiecksschaltung geben die Spannung zwischen den Phasen an (VoltageACL1_L2, VoltageACL1_L3, VoltageACL2_L3).</li>
                  </ul>
                  </p>
                ]]>
              </textElement>
              <language>de</language>
            </legibleDescription>
            <legibleDescription>
              <textElement>
                <![CDATA[
                  <img src="ressources/fp_product_to_ems.svg" style="float:left; padding:0.3em;"/>
                  <strong>Voltage measurement</strong><br />
                  Monitoring functional profile for power generators and consumers for reflecting the voltage.

                  <p>This functional profile allows measurement of the voltage on a single phase of three phases.
                    One of the following approaches must be applied when implementing the functional profile:
                  <ul>
                    <li>Single-phase devices use the total voltage with the first data point (VoltageACL1_N)</li>
                    <li>Three-phase devices in star configuration provide the voltage per phase vs. neutral using three data points (VoltageACL1_N, VoltageACL2_N, VoltageACL3_N).</li>
                    <li>Three-phase devices in delta configuration provide the voltage between phases using three data points (VoltageACL1_L2, VoltageACL1_L3, VoltageACL2_L3).</li>
                  </ul>
                  </p>
                ]]>
              </textElement>
              <language>en</language>
            </legibleDescription>
          </functionalProfile>
          <dataPointList>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>VoltageACL1_N</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>VOLTS</unit>
                <alternativeNames>
                  <manufName>I_AC_VoltageA</manufName>
                  <sunSpecName>PhVphA</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung der Spannung zwischen Phase 1 und Nullleiter</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Measurement of the voltage between phase 1 and neutral</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40083</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>VoltageACL2_N</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>VOLTS</unit>
                <alternativeNames>
                  <manufName>I_AC_VoltageB</manufName>
                  <sunSpecName>PhVphB</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung der Spannung zwischen Phase 2 und Nullleiter</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Measurement of the voltage between phase 2 and neutral</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40085</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>VoltageACL3_N</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>VOLTS</unit>
                <alternativeNames>
                  <manufName>I_AC_VoltageC</manufName>
                  <sunSpecName>PhVphC</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung der Spannung zwischen Phase 3 und Nullleiter</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Measurement of the voltage between phase 3 and neutral</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40087</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>VoltageACL1_L2</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>VOLTS</unit>
                <alternativeNames>
                  <manufName>I_AC_VoltageAB</manufName>
                  <sunSpecName>PPVphAB</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung der Spannung zwischen Phase 1-2</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Measurement of the voltage between phase 1-2</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40091</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>VoltageACL1_L3</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>VOLTS</unit>
                <alternativeNames>
                  <manufName>I_AC_VoltageCA</manufName>
                  <sunSpecName>PPVphCA</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung der Spannung zwischen Phase 1-3</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Measurement of the voltage between phase 1-3</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40095</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>VoltageACL2_L3</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>VOLTS</unit>
                <alternativeNames>
                  <manufName>I_AC_VoltageBC</manufName>
                  <sunSpecName>PPVphBC</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung der Spannung zwischen Phase 2-3</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Measurement of the voltage between phase 2-3</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40093</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
            </dataPointListElement>
          </dataPointList>
        </functionalProfileListElement>
        <functionalProfileListElement>
          <functionalProfile>
            <functionalProfileName>CurrentAC</functionalProfileName>
            <functionalProfileIdentification>
              <specificationOwnerIdentification>0</specificationOwnerIdentification>
              <functionalProfileCategory>Metering</functionalProfileCategory>
              <functionalProfileType>CurrentAC</functionalProfileType>
              <levelOfOperation>m</levelOfOperation>
              <versionNumber>
                <primaryVersionNumber>1</primaryVersionNumber>
                <secondaryVersionNumber>0</secondaryVersionNumber>
                <subReleaseVersionNumber>0</subReleaseVersionNumber>
              </versionNumber>
            </functionalProfileIdentification>
            <legibleDescription>
              <textElement>
                <![CDATA[
                  <img src="ressources/fp_product_to_ems.svg" style="float:left; padding:0.3em;"/>
                  <strong>Messung der Stromstärke</strong><br>
                  Monitoring Funktionsprofil für Stromerzeuger und Stromverbraucher zur Kontrolle der Systemlast und/oder für regeltechnische
                  Zwecke.

                  <p>Dieses Funktionsprofil erlaubt sowohl die Messung der Stromstärke auf einer Phase wie auch auf drei Phasen.
                    Eine der folgenden Varianten muss bei der Implementierung des Funktionsprofiles umgesetzt werden:
                  <ul>
                    <li>Einphasige Geräte geben die Stromstärke über die erste Phase an (CurrentAC1)</li>
                    <li>3-phasige Geräte geben die Stromstärke pro Phase an (CurrentAC1, CurrentAC2, CurrentAC3)</li>
                  </ul>
                  </p>

                  <p>Die Implementierung der Messung der Stromstärke auf dem Nulleiter (CurrentACN) ist optional möglich.</p>
                ]]>
              </textElement>
              <language>de</language>
            </legibleDescription>
            <legibleDescription>
              <textElement>
                <![CDATA[
                  <img src="ressources/fp_product_to_ems.svg" style="float:left; padding:0.3em;"/>
                  <strong>Current measurement</strong><br>
                  Monitoring functional profile for power generators and consumers for reflecting the current.

                  <p>This functional profile allows measurement of the current on a single phase of three phases.
                    One of the following approaches must be applied when implementing the functional profile:
                  <ul>
                    <li>Single-phase devices use the total current with the first data point (CurrentAC1)</li>
                    <li>Three-phase devices give the current per phase  using three data points (ActivePowerACL1, ActivePowerACL2, ActivePowerACL3)</li>
                  </ul>
                  </p>

                  <p>The implementation of a data point measuring the current on the neutral conductor is optional (via data point CurrentACN).</p>
                ]]>
              </textElement>
              <language>en</language>
            </legibleDescription>
          </functionalProfile>
          <dataPointList>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>CurrentACL1</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>AMPERES</unit>
                <alternativeNames>
                  <manufName>I_AC_CurrentA</manufName>
                  <sunSpecName>AphA</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung des Stromes in Phase 1</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Current measurement of phase 1</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40075</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>CurrentBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>CurrentACL2</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>AMPERES</unit>
                <alternativeNames>
                  <manufName>I_AC_CurrentB</manufName>
                  <sunSpecName>AphB</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung des Stromes in Phase 2</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Current measurement of phase 2</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40077</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>CurrentBlock</blockCacheIdentification>
            </dataPointListElement>
            <dataPointListElement>
              <dataPoint>
                <dataPointName>CurrentACL3</dataPointName>
                <dataDirection>R</dataDirection>
                <dataType>
                  <float64 />
                </dataType>
                <unit>AMPERES</unit>
                <alternativeNames>
                  <manufName>I_AC_CurrentC</manufName>
                  <sunSpecName>AphC</sunSpecName>
                </alternativeNames>
                <legibleDescription>
                  <textElement>Erfassung des Stromes in Phase 3</textElement>
                  <language>de</language>
                </legibleDescription>
                <legibleDescription>
                  <textElement>Current measurement of phase 3</textElement>
                  <language>en</language>
                </legibleDescription>
              </dataPoint>
              <modbusDataPointConfiguration>
                <modbusDataType>
                  <float32 />
                </modbusDataType>
                <address>40079</address>
                <registerType>HoldRegister</registerType>
                <numberOfRegisters>2</numberOfRegisters>
              </modbusDataPointConfiguration>
              <blockCacheIdentification>CurrentBlock</blockCacheIdentification>
            </dataPointListElement>
          </dataPointList>
        </functionalProfileListElement>
      </functionalProfileList>
      <timeSyncBlockNotification>
        <blockCacheIdentification>VoltageBlock</blockCacheIdentification>
        <firstAddress>40083</firstAddress>
        <size>14</size>
        <registerType>HoldRegister</registerType>
        <timeToLiveMs>5000</timeToLiveMs>
      </timeSyncBlockNotification>
      <timeSyncBlockNotification>
        <blockCacheIdentification>CurrentBlock</blockCacheIdentification>
        <firstAddress>40075</firstAddress>
        <size>6</size>
        <registerType>HoldRegister</registerType>
        <timeToLiveMs>5000</timeToLiveMs>
      </timeSyncBlockNotification>
    </modbusInterface>
  </interfaceList>
</DeviceFrame>