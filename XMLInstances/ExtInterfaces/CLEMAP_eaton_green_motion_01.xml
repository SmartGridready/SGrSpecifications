<?xml version="1.0" encoding="UTF-8"?>
<sgr:SGrModbusDeviceFrame deviceName="Webasto" isLocalControl="true" manufacturerID="WM" manufacturerName="Eaton"
    xmlns:sgr="http://www.smartgridready.ch/ns/SGr/V0/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <sgr:deviceProfile>
        <sgr:devNameList>
            <sgr:nameType>Eaton</sgr:nameType>
        </sgr:devNameList>
        <sgr:transportService>Modbus</sgr:transportService>
    </sgr:deviceProfile>
    <sgr:modbusInterfaceDesc>
        <sgr:ModbusInterfaceSelection>TCP</sgr:ModbusInterfaceSelection>
        <sgr:trspSrvModbusTCPoutOfBox>
            <sgr:PORT>502</sgr:PORT>
            <sgr:ADDRESS>
                <sgr:IPV4_n1>1</sgr:IPV4_n1>
                <sgr:IPV4_n2>1</sgr:IPV4_n2>
                <sgr:IPV4_n3>1</sgr:IPV4_n3>
                <sgr:IPV4_n4>1</sgr:IPV4_n4>
            </sgr:ADDRESS>
            <sgr:SlaveID>255</sgr:SlaveID>
        </sgr:trspSrvModbusTCPoutOfBox>
        <sgr:firstRegisterAddressIsOne>true</sgr:firstRegisterAddressIsOne>
        <sgr:conversionScheme>none</sgr:conversionScheme>
        <sgr:byteOrder>BigEndian</sgr:byteOrder>
        <sgr:wordOrder>BigEndian</sgr:wordOrder>
    </sgr:modbusInterfaceDesc>
    <sgr:fpListElement>
        <sgr:functionalProfile MROVisibilityIndicator="M" ProfileName="CurrentAC">
            <sgr:ProfileNumber>
                <sgr:SpecsOwnerId>0</sgr:SpecsOwnerId>
                <sgr:SubProfileIdent>CurrentAC</sgr:SubProfileIdent>
            </sgr:ProfileNumber>
        </sgr:functionalProfile>
        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="CurrentACL1" MROVisibilityIndicator="M" RWPDatadirection="R" unit="Amperes">
                <sgr:basicDataType dpTypeSelected="FLOAT32"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="FLOAT32"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="155" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>2</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
            <sgr:dpMbAttrReference>
                <sgr:ModbusAttr>
                    <sgr:scalingByMulPwr>
                        <sgr:multiplicator>1</sgr:multiplicator>
                        <sgr:powerof10>0</sgr:powerof10>
                    </sgr:scalingByMulPwr>
                </sgr:ModbusAttr>
            </sgr:dpMbAttrReference>
        </sgr:dpListElement>
        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="CurrentACL2" MROVisibilityIndicator="M" RWPDatadirection="R" unit="Amperes">
                <sgr:basicDataType dpTypeSelected="FLOAT32"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="FLOAT32"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="157" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>2</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
            <sgr:dpMbAttrReference>
                <sgr:ModbusAttr>
                    <sgr:scalingByMulPwr>
                        <sgr:multiplicator>1</sgr:multiplicator>
                        <sgr:powerof10>0</sgr:powerof10>
                    </sgr:scalingByMulPwr>
                </sgr:ModbusAttr>
            </sgr:dpMbAttrReference>
        </sgr:dpListElement>
        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="CurrentACL3" MROVisibilityIndicator="M" RWPDatadirection="R" unit="Amperes">
                <sgr:basicDataType dpTypeSelected="FLOAT32"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="FLOAT32"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="159" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>2</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
            <sgr:dpMbAttrReference>
                <sgr:ModbusAttr>
                    <sgr:scalingByMulPwr>
                        <sgr:multiplicator>1</sgr:multiplicator>
                        <sgr:powerof10>0</sgr:powerof10>
                    </sgr:scalingByMulPwr>
                </sgr:ModbusAttr>
            </sgr:dpMbAttrReference>
        </sgr:dpListElement>
    </sgr:fpListElement>

    <sgr:fpListElement>
        <sgr:functionalProfile MROVisibilityIndicator="M" ProfileName="ChargingCurrentLimit">
            <sgr:ProfileNumber>
                <sgr:SpecsOwnerId>0</sgr:SpecsOwnerId>
                <sgr:SubProfileIdent>ChargingCurrentLimit</sgr:SubProfileIdent>
            </sgr:ProfileNumber>
        </sgr:functionalProfile>
        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="ChargingCurrentLimitRead" MROVisibilityIndicator="M" RWPDatadirection="R"
                           unit="Amperes">
                <sgr:basicDataType dpTypeSelected="FLOAT32"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="FLOAT32"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="68" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>2</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
            <sgr:dpMbAttrReference>
                <sgr:ModbusAttr>
                    <sgr:scalingByMulPwr>
                        <sgr:multiplicator>1</sgr:multiplicator>
                        <sgr:powerof10>0</sgr:powerof10>
                    </sgr:scalingByMulPwr>
                </sgr:ModbusAttr>
            </sgr:dpMbAttrReference>
        </sgr:dpListElement>

        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="ChargingCurrentLimitWrite" MROVisibilityIndicator="M" RWPDatadirection="W"
                           unit="Amperes">
                <sgr:basicDataType dpTypeSelected="FLOAT32"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="FLOAT32"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="68" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>2</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
            <sgr:dpMbAttrReference>
                <sgr:ModbusAttr>
                    <sgr:scalingByMulPwr>
                        <sgr:multiplicator>1</sgr:multiplicator>
                        <sgr:powerof10>0</sgr:powerof10>
                    </sgr:scalingByMulPwr>
                </sgr:ModbusAttr>
            </sgr:dpMbAttrReference>
        </sgr:dpListElement>
    </sgr:fpListElement>

    <sgr:fpListElement>
        <sgr:functionalProfile MROVisibilityIndicator="M" ProfileName="Energy">
            <sgr:ProfileNumber>
                <sgr:SpecsOwnerId>0</sgr:SpecsOwnerId>
                <sgr:SubProfileIdent>Energy</sgr:SubProfileIdent>
            </sgr:ProfileNumber>
        </sgr:functionalProfile>
        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="TotalEnergyImport" MROVisibilityIndicator="M" RWPDatadirection="R" unit="Wh">
                <sgr:basicDataType dpTypeSelected="INT32u"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="INT32u"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="135" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>2</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
            <sgr:dpMbAttrReference>
                <sgr:ModbusAttr>
                    <sgr:scalingByMulPwr>
                        <sgr:multiplicator>1</sgr:multiplicator>
                        <sgr:powerof10>0</sgr:powerof10>
                    </sgr:scalingByMulPwr>
                </sgr:ModbusAttr>
            </sgr:dpMbAttrReference>
        </sgr:dpListElement>
    </sgr:fpListElement>

    <sgr:fpListElement>
        <sgr:functionalProfile MROVisibilityIndicator="M" ProfileName="Status">
            <sgr:ProfileNumber>
                <sgr:SpecsOwnerId>0</sgr:SpecsOwnerId>
                <sgr:SubProfileIdent>EV-Status</sgr:SubProfileIdent>
            </sgr:ProfileNumber>
        </sgr:functionalProfile>
        <sgr:dpListElement>
            <sgr:dataPoint DatapointName="EV-StatusCode" MROVisibilityIndicator="M" RWPDatadirection="R" unit="">
                <sgr:basicDataType dpTypeSelected="INT16u"></sgr:basicDataType>
            </sgr:dataPoint>
            <sgr:modbusDataPoint>
                <sgr:modbusDataType dpTypeSelected="INT16u"></sgr:modbusDataType>
                <sgr:modbusFirstRegisterReference addr="120" bitRank="0"
                                                  registerType="InputRegister"></sgr:modbusFirstRegisterReference>
                <sgr:dpSizeNrRegisters>1</sgr:dpSizeNrRegisters>
                <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
                <sgr:modbusJMESPath>[
                    {"state": @==`1`, "char": `"A"`},
                    {"state": @==`2`, "char": `"B"`},
                    {"state": @==`3`, "char": `"C"`},
                    {"state": @==`4`, "char": `"B"`},
                    {"state": @==`5`, "char": `"B"`},
                    {"state": @==`6`, "char": `"C"`},
                    {"state": @==`7`, "char": `"A"`},
                    {"state": @==`8`, "char": `"A"`},
                    {"state": @==`9`, "char": `"E"`},
                    {"state": `true`, "char": `"F"`}][?state] | [0].char
                </sgr:modbusJMESPath>
                <sgr:dpAccessProtectionEnabled isEnabled="false">
                    <sgr:modbusException>IllegalFunction</sgr:modbusException>
                </sgr:dpAccessProtectionEnabled>
            </sgr:modbusDataPoint>
        </sgr:dpListElement>
    </sgr:fpListElement>
</sgr:SGrModbusDeviceFrame>
