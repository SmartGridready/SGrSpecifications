<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<ModbusDeviceFrame xmlns="http://www.smartgridready.com/ns/V0/"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/EI-Modbus/SGrModbusEIDeviceFrame.xsd ">
  <deviceName>Webasto</deviceName>
  <manufacturerName>Webasto</manufacturerName>
  <releaseNotes>
    <state>Draft</state>
  </releaseNotes>
  <specificationOwnerIdentification>0</specificationOwnerIdentification>
  <isLocalControl>true</isLocalControl>
  <deviceInformation>
    <transportService>Modbus</transportService>
    <deviceCategory>ChargingStation</deviceCategory>
    <softwareRevision>0.0.0</softwareRevision>
  </deviceInformation>
  <modbusInterfaceDescription>
    <modbusInterfaceSelection>TCPIP</modbusInterfaceSelection>
    <modbusTcp>
      <port>502</port>
      <address>
        <ipV4n1>1</ipV4n1>
        <ipV4n2>1</ipV4n2>
        <ipV4n3>1</ipV4n3>
        <ipV4n4>1</ipV4n4>
      </address>
      <slaveId>1</slaveId>
    </modbusTcp>
    <firstRegisterAddressIsOne>true</firstRegisterAddressIsOne>
    <bitOrder>BigEndian</bitOrder>
  </modbusInterfaceDescription>
  <functionalProfileList>
    <functionalProfileListElement>
      <functionalProfile>
        <profileName>VoltageAC</profileName>
        <functionalProfileIdentification>
          <specificationOwnerIdentification>0</specificationOwnerIdentification>
          <functionalProfileCategory>SubMeterElectricity</functionalProfileCategory>
          <functionalProfileType>VoltageAC</functionalProfileType>
          <levelOfOperation>4</levelOfOperation>
          <versionNumber>
            <primaryVersionNumber>0</primaryVersionNumber>
            <secondaryVersionNumber>1</secondaryVersionNumber>
            <subReleaseVersionNumber>2</subReleaseVersionNumber>
          </versionNumber>
        </functionalProfileIdentification>
      </functionalProfile>
      <dataPointList>
        <dataPointListElement>
          <dataPoint>
            <datapointName>VoltageACL1</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>VOLTS</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16406</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-1</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
        <dataPointListElement>
          <dataPoint>
            <datapointName>VoltageACL2</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>VOLTS</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16408</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-1</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
        <dataPointListElement>
          <dataPoint>
            <datapointName>VoltageACL3</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>VOLTS</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16410</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-1</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
      </dataPointList>
    </functionalProfileListElement>
    <functionalProfileListElement>
      <functionalProfile>
        <profileName>CurrentAC</profileName>
        <functionalProfileIdentification>
          <specificationOwnerIdentification>0</specificationOwnerIdentification>
          <functionalProfileCategory>NonSpecific</functionalProfileCategory>
          <functionalProfileType>CurrentAC</functionalProfileType>
          <levelOfOperation>m</levelOfOperation>
          <versionNumber>
            <primaryVersionNumber>1</primaryVersionNumber>
            <secondaryVersionNumber>0</secondaryVersionNumber>
            <subReleaseVersionNumber>0</subReleaseVersionNumber>
          </versionNumber>
        </functionalProfileIdentification>
      </functionalProfile>
      <dataPointList>
        <dataPointListElement>
          <dataPoint>
            <datapointName>CurrentACL1</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>AMPERES</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32U/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16400</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-3</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
        <dataPointListElement>
          <dataPoint>
            <datapointName>CurrentACL2</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>R</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>AMPERES</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32U/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16402</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-3</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
        <dataPointListElement>
          <dataPoint>
            <datapointName>CurrentACL3</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>R</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>AMPERES</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32U/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16404</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-3</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
      </dataPointList>
    </functionalProfileListElement>
    <functionalProfileListElement>
      <functionalProfile>
        <profileName>ChargingCurrentLimit</profileName>
        <functionalProfileIdentification>
          <specificationOwnerIdentification>0</specificationOwnerIdentification>
          <functionalProfileCategory>ChargingOutlet</functionalProfileCategory>
          <functionalProfileType>Curtailment</functionalProfileType>
          <levelOfOperation>4</levelOfOperation>
          <versionNumber>
            <primaryVersionNumber>0</primaryVersionNumber>
            <secondaryVersionNumber>1</secondaryVersionNumber>
            <subReleaseVersionNumber>2</subReleaseVersionNumber>
          </versionNumber>
        </functionalProfileIdentification>
      </functionalProfile>
      <dataPointList>
        <dataPointListElement>
          <dataPoint>
            <datapointName>ChargingCurrentLimitRead</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>AMPERES</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32U/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16398</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-3</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
        <dataPointListElement>
          <dataPoint>
            <datapointName>ChargingCurrentLimitWrite</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <float64/>
            </dataType>
            <unit>AMPERES</unit>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32U/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16640</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
          <modbusAttributes>
            <scalingFactor>
              <multiplicator>1</multiplicator>
              <powerof10>-3</powerof10>
            </scalingFactor>
          </modbusAttributes>
        </dataPointListElement>
      </dataPointList>
    </functionalProfileListElement>
    <functionalProfileListElement>
      <functionalProfile>
        <profileName>Status</profileName>
        <functionalProfileIdentification>
          <specificationOwnerIdentification>0</specificationOwnerIdentification>
          <functionalProfileCategory>EV</functionalProfileCategory>
          <functionalProfileType>EnergyMonitor</functionalProfileType>
          <levelOfOperation>4</levelOfOperation>
          <versionNumber>
            <primaryVersionNumber>0</primaryVersionNumber>
            <secondaryVersionNumber>1</secondaryVersionNumber>
            <subReleaseVersionNumber>2</subReleaseVersionNumber>
          </versionNumber>
        </functionalProfileIdentification>
      </functionalProfile>
      <dataPointList>
        <dataPointListElement>
          <dataPoint>
            <datapointName>EV-StatusCode</datapointName>
            <dataDirection>R</dataDirection>
            <presenceLevel>M</presenceLevel>
            <dataType>
              <enum>
                <sgrEVState>EV_STANDBY</sgrEVState>
              </enum>
            </dataType>
            <unit>NONE</unit>
            <programmerHints>
              <textElement>
                <![CDATA[	
                  ACHTUNG: der Modbus Wert muss erst mit der Bitmaske 0x0F00 gefiltert werden, nur Bits 9-12 sind relevant.<br/>
                  JMES Path: [{"state": @==`0`, "char": `"A"`}, {"state": @==`256`, "char": `"B"`}, {"state": @==`512`, "char": `"B"`}, {"state": @==`768`, "char": `"C"`}, {"state": @==`1024`, "char": `"C"`}, {"state": @==`1280`, "char": `"E"`}, {"state": `true`, "char": `"F"`}][?state] | [0].char
                ]]>
              </textElement>
              <language>de</language>
            </programmerHints>
          </dataPoint>
          <modbusDataPointConfiguration>
            <modbusDataType>
              <int32U/>
            </modbusDataType>
            <modbusFirstRegisterReference>
              <address>16396</address>
              <bitRank>0</bitRank>
              <registerType>HoldRegister</registerType>
            </modbusFirstRegisterReference>
            <numberOfRegisters>2</numberOfRegisters>
            <masterFunctionsSupported>Primitives</masterFunctionsSupported>
          </modbusDataPointConfiguration>
        </dataPointListElement>
      </dataPointList>
    </functionalProfileListElement>
  </functionalProfileList>
</ModbusDeviceFrame>
