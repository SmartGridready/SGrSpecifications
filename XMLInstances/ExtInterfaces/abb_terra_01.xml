<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<sgr:ModbusDeviceFrame deviceName="Webasto" isLocalControl="true" specificationOwnerIdentification="0" manufacturerName="Webasto" xmlns:sgr="http://www.smartgridready.com/ns/V0/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/EI-Modbus/SGrModbusEIDeviceFrame.xsd ">
  <sgr:releaseNotes>
    <sgr:state>Draft</sgr:state>
  </sgr:releaseNotes>
  <sgr:deviceInformation>
    <sgr:transportService>Modbus</sgr:transportService>
    <sgr:deviceCategory>ChargingStation</sgr:deviceCategory>
    <sgr:softwareRevision>0.0.0</sgr:softwareRevision>
  </sgr:deviceInformation>
  <sgr:modbusInterfaceDescription>
    <sgr:modbusInterfaceSelection>TCP/IP</sgr:modbusInterfaceSelection>
    <sgr:trspSrvModbusTCPoutOfBox>
      <sgr:port>502</sgr:port>
      <sgr:address>
        <sgr:ipV4n1>1</sgr:ipV4n1>
        <sgr:ipV4n2>1</sgr:ipV4n2>
        <sgr:ipV4n3>1</sgr:ipV4n3>
        <sgr:ipV4n4>1</sgr:ipV4n4>
      </sgr:address>
      <sgr:slaveID>1</sgr:slaveID>
    </sgr:trspSrvModbusTCPoutOfBox>
    <sgr:firstRegisterAddressIsOne>true</sgr:firstRegisterAddressIsOne>
    <sgr:conversionScheme>BigEndian</sgr:conversionScheme>
  </sgr:modbusInterfaceDescription>
  <sgr:functionalProfileListElement>
    <sgr:functionalProfile profileName="VoltageAC">
      <sgr:functionalProfileIdentification>
        <sgr:specificationOwnerIdentification>0</sgr:specificationOwnerIdentification>
        <sgr:functionalProfileCategory>SubMeterElectricity</sgr:functionalProfileCategory>
        <sgr:functionalProfileType>VoltageAC</sgr:functionalProfileType>
        <sgr:levelOfOperation>4</sgr:levelOfOperation>
        <sgr:versionNumber>
          <sgr:primaryVersionNumber>0</sgr:primaryVersionNumber>
          <sgr:secondaryVersionNumber>1</sgr:secondaryVersionNumber>
          <sgr:subReleaseVersionNumber>2</sgr:subReleaseVersionNumber>
        </sgr:versionNumber>
      </sgr:functionalProfileIdentification>
    </sgr:functionalProfile>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="VoltageACL1" presenceLevel="M" dataDirection="R" unit="VOLTS">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16406" bitRank="0" registerType="InputRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-1</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="VoltageACL2" presenceLevel="M" dataDirection="R" unit="VOLTS">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16408" bitRank="0" registerType="InputRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-1</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="VoltageACL3" presenceLevel="M" dataDirection="R" unit="VOLTS">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16410" bitRank="0" registerType="InputRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-1</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
  </sgr:functionalProfileListElement>
  <sgr:functionalProfileListElement>
    <sgr:functionalProfile profileName="CurrentAC">
      <sgr:functionalProfileIdentification>
        <sgr:specificationOwnerIdentification>0</sgr:specificationOwnerIdentification>
        <sgr:functionalProfileCategory>NonSpecific</sgr:functionalProfileCategory>
        <sgr:functionalProfileType>CurrentAC</sgr:functionalProfileType>
        <sgr:levelOfOperation>m</sgr:levelOfOperation>
        <sgr:versionNumber>
          <sgr:primaryVersionNumber>1</sgr:primaryVersionNumber>
          <sgr:secondaryVersionNumber>0</sgr:secondaryVersionNumber>
          <sgr:subReleaseVersionNumber>0</sgr:subReleaseVersionNumber>
        </sgr:versionNumber>
      </sgr:functionalProfileIdentification>
    </sgr:functionalProfile>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="CurrentACL1" presenceLevel="M" dataDirection="R" unit="AMPERES">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32U/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16400" bitRank="0" registerType="HoldRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-3</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="CurrentACL2" presenceLevel="R" dataDirection="R" unit="AMPERES">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32U/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16402" bitRank="0" registerType="HoldRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-3</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="CurrentACL3" presenceLevel="R" dataDirection="R" unit="AMPERES">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32U/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16404" bitRank="0" registerType="HoldRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-3</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
  </sgr:functionalProfileListElement>
  <sgr:functionalProfileListElement>
    <sgr:functionalProfile profileName="ChargingCurrentLimit">
      <sgr:functionalProfileIdentification>
        <sgr:specificationOwnerIdentification>0</sgr:specificationOwnerIdentification>
        <sgr:functionalProfileCategory>ChargingOutlet</sgr:functionalProfileCategory>
        <sgr:functionalProfileType>Curtailment</sgr:functionalProfileType>
        <sgr:levelOfOperation>4</sgr:levelOfOperation>
        <sgr:versionNumber>
          <sgr:primaryVersionNumber>0</sgr:primaryVersionNumber>
          <sgr:secondaryVersionNumber>1</sgr:secondaryVersionNumber>
          <sgr:subReleaseVersionNumber>2</sgr:subReleaseVersionNumber>
        </sgr:versionNumber>
      </sgr:functionalProfileIdentification>
    </sgr:functionalProfile>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="ChargingCurrentLimitRead" presenceLevel="M" dataDirection="R" unit="AMPERES">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32U/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16398" bitRank="0" registerType="HoldRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-3</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="ChargingCurrentLimitWrite" presenceLevel="M" dataDirection="R" unit="AMPERES">
        <sgr:dataType>
          <sgr:float64/>
        </sgr:dataType>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32U/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16640" bitRank="0" registerType="HoldRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
      <sgr:modbusAttributes>
        <sgr:scalingFactor>
          <sgr:multiplicator>1</sgr:multiplicator>
          <sgr:powerof10>-3</sgr:powerof10>
        </sgr:scalingFactor>
      </sgr:modbusAttributes>
    </sgr:dataPointListElement>
  </sgr:functionalProfileListElement>
  <sgr:functionalProfileListElement>
    <sgr:functionalProfile profileName="Status">
      <sgr:functionalProfileIdentification>
        <sgr:specificationOwnerIdentification>0</sgr:specificationOwnerIdentification>
        <sgr:functionalProfileCategory>EV</sgr:functionalProfileCategory>
        <sgr:functionalProfileType>EnergyMonitor</sgr:functionalProfileType>
        <sgr:levelOfOperation>4</sgr:levelOfOperation>
        <sgr:versionNumber>
          <sgr:primaryVersionNumber>0</sgr:primaryVersionNumber>
          <sgr:secondaryVersionNumber>1</sgr:secondaryVersionNumber>
          <sgr:subReleaseVersionNumber>2</sgr:subReleaseVersionNumber>
        </sgr:versionNumber>
      </sgr:functionalProfileIdentification>
    </sgr:functionalProfile>
    <sgr:dataPointListElement>
      <sgr:dataPoint datapointName="EV-StatusCode" presenceLevel="M" dataDirection="R" unit="NONE">
        <sgr:dataType>
          <sgr:enum>
            <sgr:sgrEVState>EV_STANDBY</sgr:sgrEVState>
          </sgr:enum>
        </sgr:dataType>
        <sgr:programmerHints>
          <sgr:textElement>
            <![CDATA[	
              ACHTUNG: der Modbus Wert muss erst mit der Bitmaske 0x0F00 gefiltert werden, nur Bits 9-12 sind relevant.<br/>
              JMES Path: [{"state": @==`0`, "char": `"A"`}, {"state": @==`256`, "char": `"B"`}, {"state": @==`512`, "char": `"B"`}, {"state": @==`768`, "char": `"C"`}, {"state": @==`1024`, "char": `"C"`}, {"state": @==`1280`, "char": `"E"`}, {"state": `true`, "char": `"F"`}][?state] | [0].char
            ]]>
          </sgr:textElement>
          <sgr:language>de</sgr:language>
        </sgr:programmerHints>
      </sgr:dataPoint>
      <sgr:modbusDataPointConfiguration>
        <sgr:modbusDataType>
          <sgr:int32U/>
        </sgr:modbusDataType>
        <sgr:modbusFirstRegisterReference addr="16396" bitRank="0" registerType="HoldRegister"></sgr:modbusFirstRegisterReference>
        <sgr:numberOfRegisters>2</sgr:numberOfRegisters>
        <sgr:masterFunctionsSupported>Primitives</sgr:masterFunctionsSupported>
      </sgr:modbusDataPointConfiguration>
    </sgr:dataPointListElement>
  </sgr:functionalProfileListElement>
</sgr:ModbusDeviceFrame>